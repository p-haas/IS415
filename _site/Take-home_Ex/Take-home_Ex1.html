<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pierre HAAS">
<meta name="dcterms.date" content="2023-02-03">

<title>IS415 - Take-home Exercise - Application of Spatial Point Patterns Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../site_libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">IS415</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-Class Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercises">    
        <li>
    <a class="dropdown-item" href="../In-class_Ex/In-class_Ex02/In-class_Ex02.html">
 <span class="dropdown-text">In-Class Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../In-class_Ex/In-class_Ex03/In-class_Ex03.html">
 <span class="dropdown-text">In-Class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../In-class_Ex/In-class_Ex04/In-class_Ex04.html">
 <span class="dropdown-text">In-Class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../In-class_Ex/In-class_Ex05/In-class_Ex05.html">
 <span class="dropdown-text">In-Class Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercises">    
        <li>
    <a class="dropdown-item" href="../Take-home_Ex/Take-home_Ex1.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started"><span class="toc-section-number">2</span>  Getting Started</a>
  <ul class="collapse">
  <li><a href="#retrieving-data-from-the-web" id="toc-retrieving-data-from-the-web" class="nav-link" data-scroll-target="#retrieving-data-from-the-web"><span class="toc-section-number">2.1</span>  Retrieving Data from the Web</a></li>
  <li><a href="#installing-and-loading-packages" id="toc-installing-and-loading-packages" class="nav-link" data-scroll-target="#installing-and-loading-packages"><span class="toc-section-number">2.2</span>  Installing and Loading Packages</a></li>
  </ul></li>
  <li><a href="#handling-geospatial-data" id="toc-handling-geospatial-data" class="nav-link" data-scroll-target="#handling-geospatial-data"><span class="toc-section-number">3</span>  Handling Geospatial Data</a>
  <ul class="collapse">
  <li><a href="#importing-aspatial-data-csv-format" id="toc-importing-aspatial-data-csv-format" class="nav-link" data-scroll-target="#importing-aspatial-data-csv-format"><span class="toc-section-number">3.1</span>  Importing Aspatial Data, <em>csv</em> format</a>
  <ul class="collapse">
  <li><a href="#converting-water-point-data-into-sf-point-features" id="toc-converting-water-point-data-into-sf-point-features" class="nav-link" data-scroll-target="#converting-water-point-data-into-sf-point-features"><span class="toc-section-number">3.1.1</span>  Converting water point data into <em>sf</em> point features</a></li>
  <li><a href="#transforming-into-nigeria-projected-coordinate-system" id="toc-transforming-into-nigeria-projected-coordinate-system" class="nav-link" data-scroll-target="#transforming-into-nigeria-projected-coordinate-system"><span class="toc-section-number">3.1.2</span>  Transforming into Nigeria projected coordinate system</a></li>
  </ul></li>
  <li><a href="#importing-geospatial-data-shp-format" id="toc-importing-geospatial-data-shp-format" class="nav-link" data-scroll-target="#importing-geospatial-data-shp-format"><span class="toc-section-number">3.2</span>  Importing Geospatial Data, <em>shp</em> format</a>
  <ul class="collapse">
  <li><a href="#the-nga-data-set" id="toc-the-nga-data-set" class="nav-link" data-scroll-target="#the-nga-data-set"><span class="toc-section-number">3.2.1</span>  The NGA data set</a></li>
  <li><a href="#the-geoboundaries-data-set" id="toc-the-geoboundaries-data-set" class="nav-link" data-scroll-target="#the-geoboundaries-data-set"><span class="toc-section-number">3.2.2</span>  The geoBoundaries data set</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-cleaning-wrangling" id="toc-data-cleaning-wrangling" class="nav-link" data-scroll-target="#data-cleaning-wrangling"><span class="toc-section-number">4</span>  Data Cleaning &amp; Wrangling</a>
  <ul class="collapse">
  <li><a href="#geospatial-data-cleaning" id="toc-geospatial-data-cleaning" class="nav-link" data-scroll-target="#geospatial-data-cleaning"><span class="toc-section-number">4.1</span>  Geospatial Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#excluding-redundant-fields" id="toc-excluding-redundant-fields" class="nav-link" data-scroll-target="#excluding-redundant-fields"><span class="toc-section-number">4.1.1</span>  Excluding redundant fields</a></li>
  <li><a href="#checking-for-duplicated-name" id="toc-checking-for-duplicated-name" class="nav-link" data-scroll-target="#checking-for-duplicated-name"><span class="toc-section-number">4.1.2</span>  Checking for duplicated name</a></li>
  </ul></li>
  <li><a href="#data-wrangling-for-water-point-data" id="toc-data-wrangling-for-water-point-data" class="nav-link" data-scroll-target="#data-wrangling-for-water-point-data"><span class="toc-section-number">4.2</span>  Data Wrangling for Water Point Data</a>
  <ul class="collapse">
  <li><a href="#extracting-water-point-data" id="toc-extracting-water-point-data" class="nav-link" data-scroll-target="#extracting-water-point-data"><span class="toc-section-number">4.2.1</span>  Extracting water point data</a></li>
  <li><a href="#performing-point-in-polygon-count" id="toc-performing-point-in-polygon-count" class="nav-link" data-scroll-target="#performing-point-in-polygon-count"><span class="toc-section-number">4.2.2</span>  Performing Point-in-Polygon Count</a></li>
  </ul></li>
  <li><a href="#converting-sf-data-frames-to-sps-spatial-class" id="toc-converting-sf-data-frames-to-sps-spatial-class" class="nav-link" data-scroll-target="#converting-sf-data-frames-to-sps-spatial-class"><span class="toc-section-number">4.3</span>  Converting <em>sf</em> data frames to <em>sp’s</em> Spatial* class</a></li>
  <li><a href="#converting-the-spatial-class-into-generic-sp-format" id="toc-converting-the-spatial-class-into-generic-sp-format" class="nav-link" data-scroll-target="#converting-the-spatial-class-into-generic-sp-format"><span class="toc-section-number">4.4</span>  Converting the Spatial* class into generic <em>sp</em> format</a></li>
  <li><a href="#converting-the-generic-sp-format-into-spatstats-ppp-format" id="toc-converting-the-generic-sp-format-into-spatstats-ppp-format" class="nav-link" data-scroll-target="#converting-the-generic-sp-format-into-spatstats-ppp-format"><span class="toc-section-number">4.5</span>  Converting the generic <em>sp</em> format into <em>spatstat’s</em> ppp format</a></li>
  <li><a href="#creating-owin-object" id="toc-creating-owin-object" class="nav-link" data-scroll-target="#creating-owin-object"><span class="toc-section-number">4.6</span>  Creating <em>owin</em> object</a></li>
  <li><a href="#combining-point-events-object-and-owin-object" id="toc-combining-point-events-object-and-owin-object" class="nav-link" data-scroll-target="#combining-point-events-object-and-owin-object"><span class="toc-section-number">4.7</span>  Combining point events object and <em>owin</em> object</a></li>
  </ul></li>
  <li><a href="#exploratory-spatial-data-analysis" id="toc-exploratory-spatial-data-analysis" class="nav-link" data-scroll-target="#exploratory-spatial-data-analysis"><span class="toc-section-number">5</span>  Exploratory Spatial Data Analysis</a>
  <ul class="collapse">
  <li><a href="#kernel-density-estimation" id="toc-kernel-density-estimation" class="nav-link" data-scroll-target="#kernel-density-estimation"><span class="toc-section-number">5.1</span>  Kernel Density Estimation</a>
  <ul class="collapse">
  <li><a href="#re-scalling-kde-values" id="toc-re-scalling-kde-values" class="nav-link" data-scroll-target="#re-scalling-kde-values"><span class="toc-section-number">5.1.1</span>  Re-scalling KDE values</a></li>
  <li><a href="#convert-kde-output-into-grid-object" id="toc-convert-kde-output-into-grid-object" class="nav-link" data-scroll-target="#convert-kde-output-into-grid-object"><span class="toc-section-number">5.1.2</span>  Convert KDE output into grid object</a></li>
  <li><a href="#converting-grid-object-into-raster" id="toc-converting-grid-object-into-raster" class="nav-link" data-scroll-target="#converting-grid-object-into-raster"><span class="toc-section-number">5.1.3</span>  Converting grid object into raster</a></li>
  <li><a href="#assigning-projection-systems" id="toc-assigning-projection-systems" class="nav-link" data-scroll-target="#assigning-projection-systems"><span class="toc-section-number">5.1.4</span>  Assigning projection systems</a></li>
  </ul></li>
  <li><a href="#visualizing-kde-with-tmap" id="toc-visualizing-kde-with-tmap" class="nav-link" data-scroll-target="#visualizing-kde-with-tmap"><span class="toc-section-number">5.2</span>  Visualizing KDE with tmap</a></li>
  <li><a href="#nearest-neighbor-index" id="toc-nearest-neighbor-index" class="nav-link" data-scroll-target="#nearest-neighbor-index"><span class="toc-section-number">5.3</span>  Nearest Neighbor Index</a>
  <ul class="collapse">
  <li><a href="#test-1-on-functional-water-points" id="toc-test-1-on-functional-water-points" class="nav-link" data-scroll-target="#test-1-on-functional-water-points"><span class="toc-section-number">5.3.1</span>  Test 1 on functional water points</a></li>
  <li><a href="#test-2-on-non-functional-water-points" id="toc-test-2-on-non-functional-water-points" class="nav-link" data-scroll-target="#test-2-on-non-functional-water-points"><span class="toc-section-number">5.3.2</span>  Test 2 on non-functional water points</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="toc-section-number">5.3.3</span>  Conclusion</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#second-order-spatial-point-patterns-analysis" id="toc-second-order-spatial-point-patterns-analysis" class="nav-link" data-scroll-target="#second-order-spatial-point-patterns-analysis"><span class="toc-section-number">6</span>  7 - Second-order Spatial Point Patterns Analysis</a>
  <ul class="collapse">
  <li><a href="#formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level" id="toc-formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level" class="nav-link" data-scroll-target="#formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level"><span class="toc-section-number">6.1</span>  7.1 - Formulate the null hypothesis and alternative hypothesis and select the confidence level</a></li>
  <li><a href="#perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique" id="toc-perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique" class="nav-link" data-scroll-target="#perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique"><span class="toc-section-number">6.2</span>  7.2 - Perform the test by using appropriate Second order spatial point patterns analysis technique</a></li>
  <li><a href="#with-reference-to-the-analysis-results-draw-statistical-conclusions" id="toc-with-reference-to-the-analysis-results-draw-statistical-conclusions" class="nav-link" data-scroll-target="#with-reference-to-the-analysis-results-draw-statistical-conclusions"><span class="toc-section-number">6.3</span>  7.3 - With reference to the analysis results, draw statistical conclusions</a></li>
  </ul></li>
  <li><a href="#spatial-correlation-analysis" id="toc-spatial-correlation-analysis" class="nav-link" data-scroll-target="#spatial-correlation-analysis"><span class="toc-section-number">7</span>  8 - Spatial Correlation Analysis</a>
  <ul class="collapse">
  <li><a href="#formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level-1" id="toc-formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level-1" class="nav-link" data-scroll-target="#formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level-1"><span class="toc-section-number">7.1</span>  8.1 - Formulate the null hypothesis and alternative hypothesis and select the confidence level</a></li>
  <li><a href="#perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique-1" id="toc-perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique-1" class="nav-link" data-scroll-target="#perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique-1"><span class="toc-section-number">7.2</span>  8.2 - Perform the test by using appropriate Second order spatial point patterns analysis technique</a></li>
  <li><a href="#with-reference-to-the-analysis-results-draw-statistical-conclusions-1" id="toc-with-reference-to-the-analysis-results-draw-statistical-conclusions-1" class="nav-link" data-scroll-target="#with-reference-to-the-analysis-results-draw-statistical-conclusions-1"><span class="toc-section-number">7.3</span>  8.3 - With reference to the analysis results, draw statistical conclusions</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise - Application of Spatial Point Patterns Analysis</h1>
<p class="subtitle lead">Discover the geographical distribution of functional and non-function water points in Osun State, Nigeria</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pierre HAAS </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 3, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 7, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
</section>
<section id="getting-started" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Getting Started</h1>
<section id="retrieving-data-from-the-web" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="retrieving-data-from-the-web"><span class="header-section-number">2.1</span> Retrieving Data from the Web</h2>
<p>Here, you will find a list with the data used, its type, format, and source it was extracted from.</p>
<table class="table">
<thead>
<tr class="header">
<th>Type</th>
<th>Data</th>
<th>Format</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Geospatial</em></td>
<td>State GIS boundary data of Nigeria - Administration Level 1, 2 &amp; 3</td>
<td><em>.shp</em></td>
<td><a href="https://data.humdata.org/dataset/cod-ab-nga">OCHA</a> data, extracted from the <a href="https://data.humdata.org/">Humanitarian Data Exchange</a> portal (<a href="https://data.humdata.org/dataset/81ac1d38-f603-4a98-804d-325c658599a3/resource/aa69f07b-ed8e-456a-9233-b20674730be6/download/nga_adm_osgof_20190417.zip">data</a>)</td>
</tr>
<tr class="even">
<td><em>Geospatial</em></td>
<td>State GIS boundary data of Nigeria - Administration Level 2</td>
<td><em>.shp</em></td>
<td>Data collected from <a href="https://www.geoboundaries.org/">geoboundaries.org</a></td>
</tr>
<tr class="odd">
<td><em>Aspatial</em></td>
<td>Water Point Data Exchange Plus</td>
<td><em>.csv</em></td>
<td><a href="https://data.waterpointdata.org/dataset/Water-Point-Data-Exchange-Plus-WPDx-/eqje-vguj/data">Data</a> extracted from WPdx Global Data Repositories</td>
</tr>
</tbody>
</table>
<p>Note that the <em>geoboundaries</em> and OCHA data serve the same purpose. I decided to included both data set before choosing the most convenient one, based on a practical analysis of the variables included in the data sets.</p>
</section>
<section id="installing-and-loading-packages" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="installing-and-loading-packages"><span class="header-section-number">2.2</span> Installing and Loading Packages</h2>
<p>For the purpose of our analysis, we will be using the following libraries:</p>
<ul>
<li><p><strong>sf</strong></p></li>
<li><p><strong>tmap</strong></p></li>
<li><p><strong>spatstat</strong></p></li>
<li><p><strong>raster</strong></p></li>
<li><p><strong>maptools</strong></p></li>
<li><p><strong>funModeling</strong></p></li>
<li><p><strong>tidyverse</strong> and readr, dplyr, ggplot2 &amp; tidyr dependencies</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(sf, tmap, funModeling, maptools, spatstat, tidyverse, raster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="handling-geospatial-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Handling Geospatial Data</h1>
<section id="importing-aspatial-data-csv-format" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="importing-aspatial-data-csv-format"><span class="header-section-number">3.1</span> Importing Aspatial Data, <em>csv</em> format</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Import data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Glimpse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Region filter</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>We use the <em>read_csv()</em> function from the <strong>readr</strong> package. This allows us to import the water point file into our R notebook. We will store the data set under the variable <em>wp_nga</em>.</p>
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>wp_nga <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/Water_Point_Data_Exchange_-_Plus__WPdx__.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Before diving into Data Wrangling, the first step is to get an understanding of the data and its attributes. By using the function <em>glimpse()</em> of the <strong>dplyr</strong> package, we will be able to view the attributes of this data set and data type of each field.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(wp_nga)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 406,566 × 70
   row_id `#source`     #lat_d…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷
    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 651816 Water For Pe… -1.57e+1   35.1  06/11/… Yes     &lt;NA&gt;    &lt;NA&gt;    Kiosk  
 2 584864 Global Envir…  6.72e+0   -1.58 10/25/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 3 509399 GOAL           8.00e+0  -11.3  12/31/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 4  21983 WASH Liberia   8.08e+0  -10.1  12/04/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 5 660321 Water For Pe…  1.87e-1   30.4  03/14/… Yes     Piped … Piped … &lt;NA&gt;   
 6 666619 Water For Pe… -4.23e-2   30.4  03/19/… Yes     Piped … Piped … &lt;NA&gt;   
 7 657081 Water For Pe…  1.58e-3   30.3  03/05/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 8 669213 Water For Pe…  4.72e-2   30.4  09/07/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 9 668012 Water For Pe…  2.95e-1   30.7  03/02/… Yes     &lt;NA&gt;    &lt;NA&gt;    Tapsta…
10 672047 Water For Pe…  2.85e-1   30.6  03/20/… Yes     Piped … Piped … &lt;NA&gt;   
# … with 406,556 more rows, 61 more variables: `#water_tech_category` &lt;chr&gt;,
#   `#facility_type` &lt;chr&gt;, `#clean_country_name` &lt;chr&gt;, `#clean_adm1` &lt;chr&gt;,
#   `#clean_adm2` &lt;chr&gt;, `#clean_adm3` &lt;chr&gt;, `#clean_adm4` &lt;chr&gt;,
#   `#install_year` &lt;dbl&gt;, `#installer` &lt;chr&gt;, `#rehab_year` &lt;lgl&gt;,
#   `#rehabilitator` &lt;lgl&gt;, `#management_clean` &lt;chr&gt;, `#status_clean` &lt;chr&gt;,
#   `#pay` &lt;chr&gt;, `#fecal_coliform_presence` &lt;chr&gt;,
#   `#fecal_coliform_value` &lt;dbl&gt;, `#subjective_quality` &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>The output reveals that we have a tible data frame – <em>wp_nga</em> – composed of 406,566 data points and 70 columns. It is now time to take a few seconds to browse through the data to get a proper look at the different attributes in the data set.</p>
<p>Since our goal is to observe data only from the Osun state in Nigeria, we should take a look at the attributes that will allow us to filter the data set. It seems like the columns: <em>clean_country_name</em> &amp; <em>clean_adm1</em> contain the information about the country and state of the water points.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Using the <em>filter()</em> function, we will be to select on data points from the Osun state in Nigeria.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>wp_nga <span class="ot">=</span> wp_nga <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">#clean_country_name</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Nigeria"</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">#clean_adm1</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Osun"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To check if there are no mistake, we can use the function <em>unique()</em> to help us view all the unique strings in the columns <em>clean_country_name</em> &amp; <em>clean_adm1</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(wp_nga<span class="sc">$</span><span class="st">`</span><span class="at">#clean_adm1</span><span class="st">`</span>); <span class="fu">unique</span>(wp_nga<span class="sc">$</span><span class="st">`</span><span class="at">#clean_country_name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Osun"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Nigeria"</code></pre>
</div>
</div>
<p>We obtained the desired output, we are only left with data points located in Osun state, Nigeria</p>
</div>
</div>
</div>
<section id="converting-water-point-data-into-sf-point-features" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="converting-water-point-data-into-sf-point-features"><span class="header-section-number">3.1.1</span> Converting water point data into <em>sf</em> point features</h3>
<p>Using the <em>st_as_sfc()</em> function of the <strong>sf</strong> package, we convert the <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">wkt</a> field – <em>`New Georeferenced Column`</em> –into a sfc field.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wp_nga<span class="sc">$</span>Geometry <span class="ot">=</span> <span class="fu">st_as_sfc</span>(wp_nga<span class="sc">$</span><span class="st">`</span><span class="at">New Georeferenced Column</span><span class="st">`</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>wp_nga</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,557 × 71
   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷
    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 429123 GRID3             8.02    5.06 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…
 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…
 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…
 5 422190 GRID3             7.87    4.88 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 6 422064 GRID3             7.7     4.89 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…
 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    &lt;NA&gt;   
 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…
10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…
# … with 5,547 more rows, 62 more variables: `#water_tech_category` &lt;chr&gt;,
#   `#facility_type` &lt;chr&gt;, `#clean_country_name` &lt;chr&gt;, `#clean_adm1` &lt;chr&gt;,
#   `#clean_adm2` &lt;chr&gt;, `#clean_adm3` &lt;chr&gt;, `#clean_adm4` &lt;chr&gt;,
#   `#install_year` &lt;dbl&gt;, `#installer` &lt;chr&gt;, `#rehab_year` &lt;lgl&gt;,
#   `#rehabilitator` &lt;lgl&gt;, `#management_clean` &lt;chr&gt;, `#status_clean` &lt;chr&gt;,
#   `#pay` &lt;chr&gt;, `#fecal_coliform_presence` &lt;chr&gt;,
#   `#fecal_coliform_value` &lt;dbl&gt;, `#subjective_quality` &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>Now, we can convert the tibble data frame into a <strong>sf</strong> object using the <em>st_sf()</em> function. We shall also specify the georeferencing system, crs code. Here, it seems like the data is referenced in WGS84.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>wp_sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(wp_nga, <span class="at">crs=</span><span class="dv">4326</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>wp_sf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 5557 features and 70 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 4.032004 ymin: 7.060309 xmax: 5.06 ymax: 8.061898
Geodetic CRS:  WGS 84
# A tibble: 5,557 × 71
   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷
 *  &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 429123 GRID3             8.02    5.06 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…
 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…
 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…
 5 422190 GRID3             7.87    4.88 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 6 422064 GRID3             7.7     4.89 08/29/… Unknown &lt;NA&gt;    &lt;NA&gt;    Tapsta…
 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…
 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    &lt;NA&gt;   
 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…
10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…
# … with 5,547 more rows, 62 more variables: `#water_tech_category` &lt;chr&gt;,
#   `#facility_type` &lt;chr&gt;, `#clean_country_name` &lt;chr&gt;, `#clean_adm1` &lt;chr&gt;,
#   `#clean_adm2` &lt;chr&gt;, `#clean_adm3` &lt;chr&gt;, `#clean_adm4` &lt;chr&gt;,
#   `#install_year` &lt;dbl&gt;, `#installer` &lt;chr&gt;, `#rehab_year` &lt;lgl&gt;,
#   `#rehabilitator` &lt;lgl&gt;, `#management_clean` &lt;chr&gt;, `#status_clean` &lt;chr&gt;,
#   `#pay` &lt;chr&gt;, `#fecal_coliform_presence` &lt;chr&gt;,
#   `#fecal_coliform_value` &lt;dbl&gt;, `#subjective_quality` &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="transforming-into-nigeria-projected-coordinate-system" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="transforming-into-nigeria-projected-coordinate-system"><span class="header-section-number">3.1.2</span> Transforming into Nigeria projected coordinate system</h3>
<p>Using the function <em>st_transform()</em>, we transform the <strong>sf</strong> coordinates of our data points into the Nigerian projected coordinate system.</p>
<p>Note that there are three Projected Coordinate Systems of Nigeria, they are: EPSG: 26391, 26392, and 26303. For the purpose of our analysis, we will choose EPSG: 26391.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>wp_sf <span class="ot">&lt;-</span> wp_sf <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">26391</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="importing-geospatial-data-shp-format" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="importing-geospatial-data-shp-format"><span class="header-section-number">3.2</span> Importing Geospatial Data, <em>shp</em> format</h2>
<section id="the-nga-data-set" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="the-nga-data-set"><span class="header-section-number">3.2.1</span> The NGA data set</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>nga <span class="ot">=</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">layer =</span> <span class="st">"nga_admbnda_adm2"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ADM1_EN <span class="sc">==</span> <span class="st">"Osun"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `nga_admbnda_adm2' from data source 
  `C:\p-haas\IS415\Take-home_Ex\data\geospatial' using driver `ESRI Shapefile'
Simple feature collection with 774 features and 16 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(nga)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nga <span class="ot">&lt;-</span> nga <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">26391</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-geoboundaries-data-set" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="the-geoboundaries-data-set"><span class="header-section-number">3.2.2</span> The geoBoundaries data set</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>geoNGA <span class="ot">=</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">layer =</span> <span class="st">"geoBoundaries-NGA-ADM2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `geoBoundaries-NGA-ADM2' from data source 
  `C:\p-haas\IS415\Take-home_Ex\data\geospatial' using driver `ESRI Shapefile'
Simple feature collection with 774 features and 5 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(geoNGA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    ENSEMBLE["World Geodetic System 1984 ensemble",
        MEMBER["World Geodetic System 1984 (Transit)"],
        MEMBER["World Geodetic System 1984 (G730)"],
        MEMBER["World Geodetic System 1984 (G873)"],
        MEMBER["World Geodetic System 1984 (G1150)"],
        MEMBER["World Geodetic System 1984 (G1674)"],
        MEMBER["World Geodetic System 1984 (G1762)"],
        MEMBER["World Geodetic System 1984 (G2139)"],
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]],
        ENSEMBLEACCURACY[2.0]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    USAGE[
        SCOPE["Horizontal component of 3D system."],
        AREA["World."],
        BBOX[-90,-180,90,180]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>geoNGA <span class="ot">&lt;-</span> geoNGA <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">26391</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="data-cleaning-wrangling" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Data Cleaning &amp; Wrangling</h1>
<section id="geospatial-data-cleaning" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="geospatial-data-cleaning"><span class="header-section-number">4.1</span> Geospatial Data Cleaning</h2>
<section id="excluding-redundant-fields" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="excluding-redundant-fields"><span class="header-section-number">4.1.1</span> Excluding redundant fields</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>nga <span class="ot">&lt;-</span> nga <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">8</span><span class="sc">:</span><span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="checking-for-duplicated-name" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="checking-for-duplicated-name"><span class="header-section-number">4.1.2</span> Checking for duplicated name</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>nga<span class="sc">$</span>ADM2_EN[<span class="fu">duplicated</span>(nga<span class="sc">$</span>ADM2_EN)<span class="sc">==</span><span class="cn">TRUE</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</section>
</section>
<section id="data-wrangling-for-water-point-data" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="data-wrangling-for-water-point-data"><span class="header-section-number">4.2</span> Data Wrangling for Water Point Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>funModeling<span class="sc">::</span><span class="fu">freq</span>(<span class="at">data =</span> wp_sf,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">input =</span> <span class="st">'#status_clean'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     #status_clean frequency percentage cumulative_perc
1                       Functional      2319      41.73           41.73
2                   Non-Functional      2008      36.13           77.86
3                             &lt;NA&gt;       748      13.46           91.32
4      Functional but needs repair       248       4.46           95.78
5 Non-Functional due to dry season       151       2.72           98.50
6        Functional but not in use        63       1.13           99.63
7                        Abandoned        15       0.27           99.90
8         Abandoned/Decommissioned         5       0.09          100.00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>wp_sf_nga <span class="ot">&lt;-</span> wp_sf <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">status_clean =</span> <span class="st">'#status_clean'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(status_clean) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">status_clean =</span> <span class="fu">replace_na</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    status_clean, <span class="st">"unknown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="extracting-water-point-data" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="extracting-water-point-data"><span class="header-section-number">4.2.1</span> Extracting water point data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>wp_sf_functional <span class="ot">&lt;-</span> wp_sf_nga <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(status_clean <span class="sc">%in%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(<span class="st">"Functional"</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Functional but not in use"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Functional but needs repair"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>wp_sf_nonfunctional <span class="ot">&lt;-</span> wp_sf_nga <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(status_clean <span class="sc">%in%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(<span class="st">"Abandoned/Decommissioned"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Abandoned"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Non-Functional due to dry season"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Non-Functional"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Non functional due to dry season"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>wp_sf_unknown <span class="ot">&lt;-</span> wp_sf_nga <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(status_clean <span class="sc">==</span> <span class="st">"unknown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="performing-point-in-polygon-count" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="performing-point-in-polygon-count"><span class="header-section-number">4.2.2</span> Performing Point-in-Polygon Count</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>nga_wp <span class="ot">&lt;-</span> nga <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">total_wp</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">lengths</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersects</span>(nga, wp_sf_nga))) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">wp_functional</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">lengths</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersects</span>(nga, wp_sf_functional))) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">wp_nonfunctional</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">lengths</span>(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersects</span>(nga, wp_sf_nonfunctional))) <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">wp_unknown</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">lengths</span>(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersects</span>(nga, wp_sf_unknown)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="converting-sf-data-frames-to-sps-spatial-class" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="converting-sf-data-frames-to-sps-spatial-class"><span class="header-section-number">4.3</span> Converting <em>sf</em> data frames to <em>sp’s</em> Spatial* class</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>wp_functional <span class="ot">=</span> <span class="fu">as_Spatial</span>(wp_sf_functional)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional <span class="ot">=</span> <span class="fu">as_Spatial</span>(wp_sf_nonfunctional)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>nga_spat <span class="ot">=</span> <span class="fu">as_Spatial</span>(nga)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>wp_functional</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatialPointsDataFrame 
features    : 2630 
extent      : 179198.9, 291989.5, 341443.2, 449013.7  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=4 +lon_0=4.5 +k=0.99975 +x_0=230738.26 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs 
variables   : 1
names       :              status_clean 
min values  :                Functional 
max values  : Functional but not in use </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatialPointsDataFrame 
features    : 2179 
extent      : 182490.7, 291855.5, 338261.8, 448933.5  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=4 +lon_0=4.5 +k=0.99975 +x_0=230738.26 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs 
variables   : 1
names       :                     status_clean 
min values  :                        Abandoned 
max values  : Non-Functional due to dry season </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>nga_spat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatialPolygonsDataFrame 
features    : 30 
extent      : 178398.7, 292278.9, 329463.4, 452734.9  (xmin, xmax, ymin, ymax)
crs         : +proj=tmerc +lat_0=4 +lon_0=4.5 +k=0.99975 +x_0=230738.26 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs 
variables   : 4
names       :  ADM2_EN, ADM2_PCODE, ADM1_EN, ADM1_PCODE 
min values  : Aiyedade,   NG030001,    Osun,      NG030 
max values  :   Osogbo,   NG030030,    Osun,      NG030 </code></pre>
</div>
</div>
</section>
<section id="converting-the-spatial-class-into-generic-sp-format" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="converting-the-spatial-class-into-generic-sp-format"><span class="header-section-number">4.4</span> Converting the Spatial* class into generic <em>sp</em> format</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>wp_functional_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(wp_functional, <span class="st">"SpatialPoints"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(wp_nonfunctional, <span class="st">"SpatialPoints"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>nga_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(nga_spat, <span class="st">"SpatialPolygons"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="converting-the-generic-sp-format-into-spatstats-ppp-format" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="converting-the-generic-sp-format-into-spatstats-ppp-format"><span class="header-section-number">4.5</span> Converting the generic <em>sp</em> format into <em>spatstat’s</em> ppp format</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>wp_functional_ppp <span class="ot">&lt;-</span> <span class="fu">as</span>(wp_functional_sp, <span class="st">"ppp"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional_ppp <span class="ot">&lt;-</span> <span class="fu">as</span>(wp_nonfunctional_sp, <span class="st">"ppp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>wp_functional_ppp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Planar point pattern: 2630 points
window: rectangle = [179198.89, 291989.51] x [341443.2, 449013.7] units</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wp_functional_ppp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wp_functional_ppp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Planar point pattern:  2630 points
Average intensity 2.167651e-07 points per square unit

Coordinates are given to 2 decimal places
i.e. rounded to the nearest multiple of 0.01 units

Window: rectangle = [179198.89, 291989.51] x [341443.2, 449013.7] units
                    (112800 x 107600 units)
Window area = 12132900000 square units</code></pre>
</div>
</div>
</section>
<section id="creating-owin-object" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="creating-owin-object"><span class="header-section-number">4.6</span> Creating <em>owin</em> object</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>nga_owin <span class="ot">&lt;-</span> <span class="fu">as</span>(nga_sp, <span class="st">"owin"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nga_owin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="combining-point-events-object-and-owin-object" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="combining-point-events-object-and-owin-object"><span class="header-section-number">4.7</span> Combining point events object and <em>owin</em> object</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>wp_functional_ppp <span class="ot">=</span> wp_functional_ppp[nga_owin]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional_ppp <span class="ot">=</span> wp_nonfunctional_ppp[nga_owin]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wp_functional_ppp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="exploratory-spatial-data-analysis" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Exploratory Spatial Data Analysis</h1>
<p>This section has for objective:</p>
<ul>
<li><p>Deriving kernel density maps of functional and non-functional water points</p></li>
<li><p>Display kernel density maps of the <u>Osun State, Nigeria</u> on <strong><em>openstreetmap</em></strong> using appropriate <strong><em>tmap</em></strong> functions</p></li>
<li><p>Describe the spatial patterns revealed by the kernel density maps &amp; highlight the advantage of kernel density map over point map</p></li>
</ul>
<section id="kernel-density-estimation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="kernel-density-estimation"><span class="header-section-number">5.1</span> Kernel Density Estimation</h2>
<p>Our first step to KDE is to derive two density maps for functional and non-functional water points to check for any potential data problem. Here, we suspect that the scale of density values will be expressed in meters. The default measurement unit of Nigeria’s projected coordinate system – <a href="https://epsg.io/26391">EPSG:26391</a> – is expressed in meters. We shall verify that and correct it to kilometers to get a more desirable map output (scale).</p>
<p>For starters, we should use the <em>density()</em> function to compute kernel density estimates for both types of water points. We will use two methods for smoothing the bandwidth for the kernel estimation point process intensity and leave the default kernel smoothing method – the Gaussian method.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Adaptive Bandwidth</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Automatic Bandwidth</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>kde_wpfunc.m <span class="ot">&lt;-</span> <span class="fu">adaptive.density</span>(wp_functional_ppp,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">method =</span> <span class="st">"kernel"</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc.m <span class="ot">&lt;-</span> <span class="fu">adaptive.density</span>(wp_nonfunctional_ppp,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">method =</span> <span class="st">"kernel"</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpfunc.m,</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Functional Water Points"</span>,</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"right"</span>))</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpnonfunc.m,</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Non-Functional Water Points"</span>,</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"right"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>kde_wpfunc.mppl <span class="ot">&lt;-</span> <span class="fu">density</span>(wp_functional_ppp, </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">sigma=</span>bw.ppl, </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">edge=</span><span class="cn">TRUE</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc.mppl <span class="ot">&lt;-</span> <span class="fu">density</span>(wp_nonfunctional_ppp,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">sigma=</span>bw.ppl,</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">edge=</span><span class="cn">TRUE</span>)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpfunc.mppl, </span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Functional Water Points"</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpnonfunc.mppl,</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Non-Functional Water Points"</span>,</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>The density values of the output range from 0 to 0.000006 and it makes for an output difficult to comprehend and interpret. Thus, we will re-scale our density values to get an output in “number of points per square kilometer”.</p>
<section id="re-scalling-kde-values" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="re-scalling-kde-values"><span class="header-section-number">5.1.1</span> Re-scalling KDE values</h3>
<p>To change the scale of the density values, we use the <em>rescale()</em> function from the <strong><em>spatstat.geom</em></strong> package. Here, we multiply values of our two objects of class <em>ppp</em> by 1000. We thus express them in kilometers and define the unit name to be “km”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>wp_functional_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(wp_functional_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>wp_nonfunctional_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(wp_nonfunctional_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now run the previously used <em>density()</em> function using the re-scaled data and plot the output KDE map.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Adaptive Bandwidth</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Automatic Bandwidth</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>kde_wpfunc.km <span class="ot">&lt;-</span> <span class="fu">adaptive.density</span>(wp_functional_ppp.km,</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">method =</span> <span class="st">"kernel"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc.km <span class="ot">&lt;-</span> <span class="fu">adaptive.density</span>(wp_nonfunctional_ppp.km,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">method =</span> <span class="st">"kernel"</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpfunc.km,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Functional Water Points"</span>,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpnonfunc.km,</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Non-Functional Water Points"</span>,</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>kde_wpfunc.ppl <span class="ot">&lt;-</span> <span class="fu">density</span>(wp_functional_ppp.km,</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sigma =</span> bw.ppl,</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">edge =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc.ppl <span class="ot">&lt;-</span> <span class="fu">density</span>(wp_nonfunctional_ppp.km,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">sigma =</span> bw.ppl,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">edge =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpfunc.ppl,</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Functional Water Points"</span>,</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kde_wpnonfunc.ppl,</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Non-Functional Water Points"</span>,</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">ribside=</span><span class="fu">c</span>(<span class="st">"bottom"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>We start observing signs of potential clustering but, for now, we shall focus on transforming our <em>im</em> objects into <em>rasters</em> to plot our KDE maps using the <strong><em>tmap</em></strong> package. We will talk more about CSR and clustering later.</p>
</section>
<section id="convert-kde-output-into-grid-object" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="convert-kde-output-into-grid-object"><span class="header-section-number">5.1.2</span> Convert KDE output into grid object</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Adaptive Bandwidth</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Automatic Bandwidth</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div>
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>gridded_wpfunc <span class="ot">&lt;-</span> <span class="fu">as.SpatialGridDataFrame.im</span>(kde_wpfunc.km)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>gridded_wpnonfunc <span class="ot">&lt;-</span> <span class="fu">as.SpatialGridDataFrame.im</span>(kde_wpnonfunc.km)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(gridded_wpfunc)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(gridded_wpnonfunc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-warnin="false">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Functional Water Points</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-40-2.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Non-Functional Water Points</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div>
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gridded_wpfunc.ppl <span class="ot">&lt;-</span> <span class="fu">as.SpatialGridDataFrame.im</span>(kde_wpfunc.ppl)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>gridded_wpnonfunc.ppl <span class="ot">&lt;-</span> <span class="fu">as.SpatialGridDataFrame.im</span>(kde_wpnonfunc.ppl)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(gridded_wpfunc.ppl)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(gridded_wpnonfunc.ppl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-warnin="false">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Functional Water Points</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-41-2.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Non-Functional Water Points</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="converting-grid-object-into-raster" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="converting-grid-object-into-raster"><span class="header-section-number">5.1.3</span> Converting grid object into raster</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Functional</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Non-functional</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>kde_wpfunc_raster <span class="ot">&lt;-</span> <span class="fu">raster</span>(gridded_wpfunc)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>kde_wpfunc_raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 0.8896887, 0.9630582  (x, y)
extent     : 178.3987, 292.2789, 329.4634, 452.7349  (xmin, xmax, ymin, ymax)
crs        : NA 
source     : memory
names      : v 
values     : 1.702123e-16, 26.9948  (min, max)</code></pre>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc_raster <span class="ot">&lt;-</span> <span class="fu">raster</span>(gridded_wpnonfunc)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc_raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 0.8896887, 0.9630582  (x, y)
extent     : 178.3987, 292.2789, 329.4634, 452.7349  (xmin, xmax, ymin, ymax)
crs        : NA 
source     : memory
names      : v 
values     : 2.624981e-14, 23.06775  (min, max)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="assigning-projection-systems" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="assigning-projection-systems"><span class="header-section-number">5.1.4</span> Assigning projection systems</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Functional WP</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Non-functional WP</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details>
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">projection</span>(kde_wpfunc_raster) <span class="ot">&lt;-</span> <span class="fu">CRS</span>(<span class="st">"+init=EPSG:26391 +datum:WGS84 +units=km"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>kde_wpfunc_raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 0.8896887, 0.9630582  (x, y)
extent     : 178.3987, 292.2789, 329.4634, 452.7349  (xmin, xmax, ymin, ymax)
crs        : +init=EPSG:26391 +datum:WGS84 +units=km 
source     : memory
names      : v 
values     : 1.702123e-16, 26.9948  (min, max)</code></pre>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">projection</span>(kde_wpnonfunc_raster) <span class="ot">&lt;-</span> <span class="fu">CRS</span>(<span class="st">"+init=EPSG:26391 +datum:WGS84 +units=km"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>kde_wpnonfunc_raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 128, 128, 16384  (nrow, ncol, ncell)
resolution : 0.8896887, 0.9630582  (x, y)
extent     : 178.3987, 292.2789, 329.4634, 452.7349  (xmin, xmax, ymin, ymax)
crs        : +init=EPSG:26391 +datum:WGS84 +units=km 
source     : memory
names      : v 
values     : 2.624981e-14, 23.06775  (min, max)</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="visualizing-kde-with-tmap" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="visualizing-kde-with-tmap"><span class="header-section-number">5.2</span> Visualizing KDE with tmap</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">'view'</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_basemap</span>(<span class="st">"OpenStreetMap"</span>) <span class="sc">+</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(kde_wpfunc_raster) <span class="sc">+</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="st">"v"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-42b3ebd7dba9af892479" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-42b3ebd7dba9af892479">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHsAAACGCAYAAAD9y/W4AAAEfklEQVR4nO2dO3LUQBCGWy7XnoAbkDg2AQkBF+AQlI9AQBXlG3AOn4CI3MkmjgngBnuCTYbEAlleSfPoHvXj/yKqzOoxn/6e0WhWOxBQQzo/pfHfw+F24N4++wZBPVPZczjkQ/YCY8NLJGxrn2u0HA9kz5g3eEvjXpK3tL0c0TXHNL1oIZu2G3pN0Pi3ElnTbZZ+buuYpsf26jM1O/JCraCSz6bTkYY370sPreqY/u1z4dhCyyaqT5YW5rLXzuda/nBAD3Iu2qseBwLqSacjpcf79f+TOYqHbOOU3K6hzzbeZ28x7dNDJ9u76DmhZUcDsgMB2YHYZYC2x0OGS/v3zrx9d3+io+2pkhcutauKhpYUHknwyFJ7dpGd2+Dc0iF69rceByD1rLZ0297Zajvx0XjJo8Aa9hrkaSOnHUSeerWkbbogAGxT0lbsya4RnU5HOj98r95G1xF9ZQXiZjjcDqXnrWZS5fDuprohe/bbkqtOso+h8uJmT0RTCZ8t4VlbhVGzRMgD6laXcjZ+68I8T7R2VyJlvKY/WQOieWAdjUOKHGq+EQLJsnBVyc1ktyyEB7pY7bNHuen8lKyJ1nI/rAk199kSQPhLFvsCa0n2DFef7TrZ4CWQHQjIDgRkBwKyAxFWds63I70RVjb9+rH3EXQn7pfxbz6pWIjQk+Y39wB5MKnyTHq8dz0tyrku4KJsK6s70+lID99+0p+vX1wL58L83Pgo2Wv/yxk887I9w11hzffZIJ9Xt15ItF+y344H+iIxSL4mguQooM8OxBVSHQcsEVaI1KQWBmgKkZL9os+u3Uk6Hen33QdMWT6TTkeVbfFqgFYr/O3nj26nLEtonb6VfC6B6VJmWn8mYhfZI5C+DxLScZ+tFImQQXYgskrF/HVVKO39EF+pIrlDsB9Fq0uRaNtk99kQbZ/i8gzpfemyBm0NCO8L1o2DYqplY4TeD65K2iwMJb0PHOFCGQ8EZBuBo4JCdiBCy9a4mmSN1nQ3ycbgzBZNIzzI3ofakXnoMh6NatlItT2QbIPUBg0PQoxT0n9DthNypKOMBwLJdshSypHsQEB2ICA7ENXTpei3dbI2Ko/7VmKFXBKVG6qcWy8kewf2Wr+HZHdCwwJNDNA6oEE0EWSLo0U0EWSHArIDgblxITSV7xEkOxCQHQjIDgRkC6CxvyaC7FDgNRtCaEw3kh2I7AchSLR9kOxAZMlGqn2AV1ALoHFwRoQyHorVKxCpLkdrqomQ7FBgDRoTmhM9gmQ3YuklPPj1HyZCJNvCSUpjpQ2q+2wrJyiB1XMvvvVaOtFIZd+q7MVkz+VZPUHwHzaBUZJt+aLHrVcBlkUTYVIlC+uSR1hPwmMp9yKaCGV8FU+iiXYs4/htz/50L+NradEk3VuqiTqX8a0G9NjAmmBv3KV01ojcM+keLzzxPrul0cbPairvlmEv41O5HtNhGZFkQ7JOzEjpUcq9X6QmTo7th0edy9wizAxadNFEDmQPh9sB9+95mJcN8jFzxecukcIKGyek81PCBEs9fwH0CAXr0hE9ZgAAAABJRU5ErkJggg==",[[8.09504026647569,4.02502086977746],[6.9768697144782,5.06036064191272]],1,null,"tmap401","kde_wpfunc_raster"]},{"method":"addLegend","args":[{"colors":["#FFFACE","#FEE697","#FEBE4A","#F88B22","#DB5D0A","#A33803"],"labels":["0 to 5","5 to 10","10 to 15","15 to 20","20 to 25","25 to 30"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_wpfunc_raster","group":"kde_wpfunc_raster"}]},{"method":"addLayersControl","args":[[],"kde_wpfunc_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[6.9768697144782,8.09504026647569],"lng":[4.02502086977746,5.06036064191272]},"fitBounds":[6.97997286813081,4.02502086977746,8.09504026647569,5.05847621601094,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">'view'</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_basemap</span>(<span class="st">"OpenStreetMap"</span>) <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(kde_wpnonfunc_raster) <span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="st">"v"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7696dbd66031b27b5da2" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7696dbd66031b27b5da2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHsAAACGCAYAAAD9y/W4AAAEkUlEQVR4nO2dO27cMBCGR4YLH8DV9rlBysVewVdJYfgWAXIWH2HhNl3OsI0DpHWnNBGilVcSHzPkPP6vMryQRPHTDCmSkgYCahg/3sbp7+HhOHDvn32HoJy57CUc8iF7haniJSJs75hb1JQHshcsK7ymcm/JW9tfiuiSMs0vWsim/YreEjT9liNrvs/c7fbKNC/bp21KDuSFUkEl20pxS/pa2ULLJtIjrZSl7K3zuZcvDmhBykV716IgnhgvZxovZ1XHS+3FI40bSOPj5UzD4VS8/ZTqIduA7BrmbXroNO5d9JLQsqMB2YGA7EB06aD1mGS4dXzvLOu3+4yOtlklL9yqVxUVLSk8kuCJtfpsIju1wrmlQ/TitxYFkJqrzd23d/bqTrw3Li2jVydPGyn1IFJRtYI1R/c0KVEzVs1JTl2xRzZHxdcsKmhJy9mvJcPDccg9bxeDKi0jezicrqJ6fH1uLr304la7eGG+vmv+v+lvDW31cDjR+LVtSle3upQz0moX5nmi9gIXSeMl7ckWEM0DaxqHFDnUPBGiTbK226NauLLk7k5qFsL3xJNwLtmbbfYkd/x4Gy2JJvIhmRsX99kgjdX0YC2SPdMkjQNfQHYgIDsQkB0IyA5EWNmtn8bUQFjZRES/f3zvXYSmqJ3PlmY4nOjxW+9StKX6zT1AHgyq/MN7u8u5LuCmbA1LfnLwLpwL8202ZrfSMZ/GPcOdYSE7EJ/SOHrifkl+Ox5oi0Qn+Z4IkqOANjsQd4jqOJhbIhwBqUEtdNAUIiX7qs2u+kTC63N9aYAomPViZD5GXzqMKzkv0WwiJMJkxfJBfW0kPevVoiDgGomAw322UiSCDLIDkZQqlu83QWpvh/hKFckDgn5krVRBRNsmuc2GaPtkp2dIbwtnE1q0IwhvS9h14xFG4qQolt2rh655OFIKrkxaLQwpvQ0cwWUujYNyINsIHBkUsgMRUvZ4OdP7yxO9vzz1LkoWtdFdJVuycyb5GozhcKLH4xf6+etPqOVUVT08adlEsrdatR8h70Vpz1ytbLBOqeziNA7R9gjZQbNOaaBhIsQ4OSkdsp2QIh1pPBCIbIesRTkiOxCQHQjIDkT5I7pot1Wy1Ss3/4ZDT9wSlRpUKbdeiOwO9Fq/h8huhIZHqNBBa4AG0USQLY4W0USQHQrIDgTGxoXQlL4nENmBgOxAQHYgIFsAje01EWSHAq/ZEEJjdCOyA5E8EYKItg8iOxBJshHVPsArqAXQ2DkjQhoPxeYViKjOR2tUEyGyQ4E1aExojugJRHYgVmWjvfZHdWRbSF/SWKmD4jbbyglKYPXcs2+91k40Utq3Kns1spfyrJ4g+A+bwCiRbfmix61XBpZFE2FQJQnrkidYT8JjKvcimghpfBNPook6pnF827M9zdP4VrRoku4tqokap/G9CvRYwZpgr9y16CwR2TPSPV544m12TaVN22pK75ZhT+NzuR6jwzIikQ3JOjEjpUUq936Rmjg5tg+POpe5R5gRtOiiiRzIHh6OA+7f0zAvG6Rj5opPXSKFFTZOGD/eRgywlPMXHakAw1+FwSUAAAAASUVORK5CYII=",[[8.09504026647569,4.02502086977746],[6.9768697144782,5.06036064191272]],1,null,"tmap401","kde_wpnonfunc_raster"]},{"method":"addLegend","args":[{"colors":["#FFF8C4","#FEDE86","#FEAA38","#EA6E13","#B74202"],"labels":["0 to 5","5 to 10","10 to 15","15 to 20","20 to 25"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"unknown","title":"v","extra":null,"layerId":"legend401","className":"info legend kde_wpnonfunc_raster","group":"kde_wpnonfunc_raster"}]},{"method":"addLayersControl","args":[[],"kde_wpnonfunc_raster",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[6.9768697144782,8.09504026647569],"lng":[4.02502086977746,5.06036064191272]},"fitBounds":[6.97997286813081,4.02502086977746,8.09504026647569,5.05847621601094,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="nearest-neighbor-index" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="nearest-neighbor-index"><span class="header-section-number">5.3</span> Nearest Neighbor Index</h2>
<p>Before moving on to the Second-order Spatial Points Analysis, I would like to perform the Clark-Evans test to measure aggregation of functional and non-functional water points. The goal is to test the randomness of the data points and assess whether they are randomly distributed, clustered or dispersed.</p>
<p>We will perform a series of 2 tests, first on functional water points and, second, on non-functional water points. We will be using the <em>clarkevans.test()</em> function of the <strong>spatstat</strong> package.</p>
<p>The hypotheses are the following:</p>
<p><strong><em>Test 1</em></strong></p>
<p><strong>H<sub>0</sub> :</strong> Functional Water Points are randomly distributed</p>
<p><strong>H<sub>1</sub> :</strong> Functional Water Points are not randomly distributed, they are clustered</p>
<p><strong><em>Test 2</em></strong></p>
<p><strong>H<sub>0</sub> :</strong> Non-functional Water Points are randomly distributed</p>
<p><strong>H<sub>1</sub> :</strong> Non-functional Water Points are not randomly distributed, they are clustered</p>
<p>As you may have read above, we determine the alternative hypothesis to be that water points are clustered. This decision is based on an intuition that derives from the previously seen visual representations of functional and non-functional water points. Indeed, we observed in our KDE plots some concentration of data points across the Osun State. Thus, we would like to test for clustering directly to prove this intuition.</p>
<p>Please note that when conducting our tests, we will use a 5% significance level.</p>
<section id="test-1-on-functional-water-points" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="test-1-on-functional-water-points"><span class="header-section-number">5.3.1</span> Test 1 on functional water points</h3>
<p>First test on functional water points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clarkevans.test</span>(wp_functional_ppp,</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">correction=</span><span class="st">"none"</span>,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">clipregion=</span><span class="cn">NULL</span>,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">alternative=</span><span class="fu">c</span>(<span class="st">"clustered"</span>),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">nsim=</span><span class="dv">99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 99 simulations of CSR with fixed n

data:  wp_functional_ppp
R = 0.44265, p-value = 0.01
alternative hypothesis: clustered (R &lt; 1)</code></pre>
</div>
</div>
</section>
<section id="test-2-on-non-functional-water-points" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="test-2-on-non-functional-water-points"><span class="header-section-number">5.3.2</span> Test 2 on non-functional water points</h3>
<p>Second test on non-functional water points</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clarkevans.test</span>(wp_nonfunctional_ppp,</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">correction=</span><span class="st">"none"</span>,</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">clipregion=</span><span class="cn">NULL</span>,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">alternative=</span><span class="fu">c</span>(<span class="st">"clustered"</span>),</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">nsim=</span><span class="dv">99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Clark-Evans test
    No edge correction
    Monte Carlo test based on 99 simulations of CSR with fixed n

data:  wp_nonfunctional_ppp
R = 0.43223, p-value = 0.01
alternative hypothesis: clustered (R &lt; 1)</code></pre>
</div>
</div>
</section>
<section id="conclusion" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">5.3.3</span> Conclusion</h3>
<p>Conclusion?</p>
</section>
</section>
</section>
<section id="second-order-spatial-point-patterns-analysis" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> 7 - Second-order Spatial Point Patterns Analysis</h1>
<section id="formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level"><span class="header-section-number">6.1</span> 7.1 - Formulate the null hypothesis and alternative hypothesis and select the confidence level</h2>
</section>
<section id="perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique"><span class="header-section-number">6.2</span> 7.2 - Perform the test by using appropriate Second order spatial point patterns analysis technique</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># G_tm = Gest(wp_functional_ppp, correction = "best")</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(G_tm)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="with-reference-to-the-analysis-results-draw-statistical-conclusions" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="with-reference-to-the-analysis-results-draw-statistical-conclusions"><span class="header-section-number">6.3</span> 7.3 - With reference to the analysis results, draw statistical conclusions</h2>
</section>
</section>
<section id="spatial-correlation-analysis" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> 8 - Spatial Correlation Analysis</h1>
<p>In this section, you are required to confirm statistically if the spatial distribution of functional and non-functional water points are independent from each other.</p>
<section id="formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level-1" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="formulate-the-null-hypothesis-and-alternative-hypothesis-and-select-the-confidence-level-1"><span class="header-section-number">7.1</span> 8.1 - Formulate the null hypothesis and alternative hypothesis and select the confidence level</h2>
</section>
<section id="perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique-1" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="perform-the-test-by-using-appropriate-second-order-spatial-point-patterns-analysis-technique-1"><span class="header-section-number">7.2</span> 8.2 - Perform the test by using appropriate Second order spatial point patterns analysis technique</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#L_wpfunc = Lest(wp_functional_ppp, correction = "Ripley")</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(L_wpfunc, . -r ~ r, ylab= "L(d)-r", xlab = "d(m)")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># L_wp1.csr &lt;- envelope(wp1_ppp, Lest, nsim = 99, rank = 1, glocal=TRUE)</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(L_wp1.csr, . - r ~ r, xlab="d", ylab="L(d)-r", main = "L-test for Functional WP in Borepe")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># K_wpnonfunc = Kest(wp_nonfunctional_ppp, correction = "isotropic")</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(K_wpnonfunc, . -r ~ r, ylab= "K(d)-r", xlab = "d(m)", xlim=c(0,1000))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="with-reference-to-the-analysis-results-draw-statistical-conclusions-1" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="with-reference-to-the-analysis-results-draw-statistical-conclusions-1"><span class="header-section-number">7.3</span> 8.3 - With reference to the analysis results, draw statistical conclusions</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>